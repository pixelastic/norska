#!/usr/bin/env node
/* eslint-disable import/no-commonjs */
const norska = require('../build/index').default;
const minimist = require('minimist');
const _ = require('golgoth').lodash;
const chalk = require('golgoth').chalk;

const args = minimist(process.argv.slice(2));
const options = _.omit(args, ['_']);
const command = args._[0];

(async () => {
  // Stop early if no such command exists
  if (!norska[command]) {
    process.exitCode = 1;
    console.error(`Unknown command ${chalk.red(command)}`);
    return;
  }

  await norska[command](options);
})();
